name: Deploy to GitHub Pages

on:
  push:
    branches: 'main'

jobs:
  build_site:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      # If you're using pnpm, add this step then change the commands and cache key below to use `pnpm`
      # - name: Install pnpm
      #   uses: pnpm/action-setup@v2
      #   with:
      #     version: 8

      - name: Install Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: npm

      - name: Install dependencies
        run: npm install

      - name: build


        env:
          BASE_PATH: '/${{ github.event.repository.name }}'
          GITHUB_HYGRAPH_URL: "https://eu-central-1-shared-euc1-02.cdn.hygraph.com/content/clmzz4539023b01ue1k1uhxt7/master"
          GITHUB_HYGRAPH_KEY=: "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2OTU4OTk4NDEsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEtc2hhcmVkLWV1YzEtMDIuaHlncmFwaC5jb20vdjIvY2xteno0NTM5MDIzYjAxdWUxazF1aHh0Ny9tYXN0ZXIiLCJtYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiNTAzZGE5MzgtZDQ3Yi00ODYwLWJiMmQtZDViYTcyNTA1YWUyIiwianRpIjoiY2xuMzJ6OG55MThjdjAxdXE4MWhkZG5sdSJ9.EsHpKbXqZZtrGjD8AR_qtpw02qWaNxGj807XbOAlQPATIlnkPFkpRbVGoEFqwAoffBxxU8h46A4IJBh-W7eHIK2r6WX_jKhnxmi8otUmGz3D_NMLGYQ9PAD4XkH2VvrwcaL5NZfEWG9wMBAv36axmKxuCrkfmwVbpneF5kvQSDK1EM_m7u1Wd0H35lnnFZRLwSl8RcfE-VZ5XdopCbzRzhpTQmNuBzWVGJKBAvk2GWTfVPB7cc3rsGN4PtVbhpJsSTKoLYkoYaI-hq0DkGJJcTnjVJENNZaz3UClA0fIGEbNN_adFpN0M0eRM6nQWHrwnBJkiEx0bIV2fav6zJoum9uQLxoRru6VsDREncfaqVWmrHeuUwdBWPPVvE86wtEVY01foj1iZ90ZgIJO11hy-uhPRIbRfUNV9QSNqfFeXkIQ8gPxN0owKmIEt061SnumuCZy44qVCXOweczSTK9ScDeFAznClElmJzGiWX5Yp-LJup1-AQMbORPn7JQmKqtaVDeiPl-D4IDgm_uuLKX57IMBwI6qXdYrzRXGc4Y0XJ6847KhsQhS65H0hfX9xTeCEgEZFqQEKoi2JKrOy9iuiwxaC99LgNR6qmY8FyK4i5WU3A6p2KUZct256i-1LEUO86w-2EmxdHPMpyfHckuahjMbM5wFMFJed2WIZwS8Cxo"
          
        run: |
          npm run build

      - name: Upload Artifacts
        uses: actions/upload-pages-artifact@v2
        with:
          # this should match the `pages` option in your adapter-static options
          path: 'build/'

  deploy:
    needs: build_site
    runs-on: ubuntu-latest



    permissions:
      pages: write
      id-token: write




    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    steps:
      - name: Deploy
        id: deployment
        uses: actions/deploy-pages@v2
